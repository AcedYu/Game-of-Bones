<script src="https://js.stripe.com/v3/" defer></script>
<script>
    var stripPublicKey = '<%= stripePublicKey %>'
</script>



<div class="row">
  <div class="col-3"></div>
 <div class="col-6 mt-5">
   <div class="alert alert-info" role="alert">
    <i class="fad fa-wand-magic me-2"></i>Level up your collection with these awesome booster packs. 
    </div>
  <div class="row d-flex justify-content-center">
    
    {{#each factions as |factions| }}
      <div id="" class="card card-faction">
            <img id="" src="{{image_url}}" class="card-img-top" alt="...">
            <div id="" class="card-body">
            <h5 id="" class="card-title">{{name}}</h5>
            </div>
            <div class="card-footer">
    <form action="payment" method="POST"> 
    <script
        src="//checkout.stripe.com/v2/checkout.js"
        class="stripe-button"
        stripePublicKey = '<%= stripePublicKey %>'
        data-amount="500" 
        data-currency="usd" 
        data-name= {{name}} 
        data-description="Card Pack" 
        data-locale="auto" > 
        </script> 
    </form>               
    <small class="mt-5"><i class="fal fa-lock-alt me-2"></i>Powered by<i class="fab fa-cc-stripe ms-2"></i></small>
            </div>
        </div>     
    {{/each}}
  </div>
 </div>
  <div class="col-3"></div>
</div>
<article id="cartParent">
    <p>Shopping Cart</p>
    <p>______________</p>
    <ul id="cartList" class="list-group">

    </ul>
</article>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- end hbs template -->
<script>stripePublicKey = '<%= stripePublicKey %>'</script>
<script defer>
    var removeButton = $('#packRemoveButton')
var cardListDom = $('#cartList')

var buttonKingdom = $('#Kingdom')
var buttonChaos = $('#Chaos')
var buttonForest = $('#Forest')


kingdomItemsArray = []
chaosItemsArray = []
forestItemsArray = []

var price = 0
var tax = 1.07
var priceAfterTax = price * tax
var priceForStripe = priceAfterTax * 100

function addToCartKingdom (){
    var kingdomFaction = 'kingdomFaction'
    kingdomItemsArray.push(kingdomFaction)
    renderCartKingdom();
}
function addToCartChaos (){
    var chaosFaction = 'chaosFaction'
    chaosItemsArray.push(chaosFaction)
    renderCartChaos();

}
function addToCartForest (){
    var forestFaction = 'forestFaction'
    forestItemsArray.push(forestFaction)
    renderCartForest();
}

function removeFromCartFaction1(){

}
function removeFromCartFaction2(){

}
function removeFromCartFaction3(){

}

function renderCartKingdom(){
    let cardDiv = $('<li>');
            
    cardListDom.append(cardDiv)

    let cardTemplate = $(`    
    <li class="list-group-item d-flex justify-content-between align-items-center">
     Kingdom Faction
     <button type="button" class="btn btn-danger">Remove</button>
    </li>`)
    cardDiv.append(cardTemplate)

}
function renderCartChaos(){
    let cardDiv = $('<li>');
            
    cardListDom.append(cardDiv)

    let cardTemplate = $(`    
    <li class="list-group-item d-flex justify-content-between align-items-center">
     Chaos Faction
     <button type="button" class="btn btn-danger">Remove</button>
    </li>`)
    cardDiv.append(cardTemplate)

}

function renderCartForest(){
    let cardDiv = $('<li>');
            
    cardListDom.append(cardDiv)

    let cardTemplate = $(`    
    <li class="list-group-item d-flex justify-content-between align-items-center">
     Forest Faction
     <button type="button" class="btn btn-danger">Remove</button>
    </li>`)
    cardDiv.append(cardTemplate)s

}

var stripeHandler = stripeCheckout.configure({
    key:stripePublicKey,
    locale:auto,
    token: function(token){
        var items []
        var cartItems[]

    }
    
})
function purchaseCart(){
    
    stripeHandler.open({
        amount: priceForStripe
    })
}


function givePlayerCards (){

}

buttonKingdom.on('click',addToCartKingdom)
buttonChaos.on('click',addToCartChaos)
buttonForest.on('click',addToCartForest)

removeButton.on('click',removeFromCart)


</script>